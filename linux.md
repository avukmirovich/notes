Linux commands
===
`pwd` - print working directory. Выводит имя текущего директория

`ls -a` - отображает все элементы, включая скрытые (те, что начинаются с точки)

`ls -l` - отображает все элементы в длинном формате:
* Права доступа, например: drwxr-x-r-x или -rw-r--r--
* Кол-во жестких сслылок (hard links). Показывает кол-во дочерних элементов, включая ссылку на родительскую (.) и текущую (..) директории
* Имя пользователя-владельца
* Имя группы-владельца
* Размер в байтах
* Дата последнего изменения
* Имя элемента

`ls -t` - сортирует элементы по дате из последнего изменения

`ls -R` - рекурентно

`ls --color` - разноцветный вывод

`ls -b` - показывает, как можно "эскайпить" спецсимволы в именах файлов

`tree` - рисует структуру директориев. Доступна не всегда.
* `tree -d` - только директории
* `tree -C` - разноцветный вывод

`cp` - копирование файлов. Можно указывать несколько файлов, чтобы их все скопировать в директорий, который указывается последним. Например: `cp foo.txt bar.txt report/`
* можно использовать wildcard'ы, например \*, которая обозначая "все, любой"
* если указать только ее вместо имени файла, то будут скопированы все файлы
* можно ее использовать и в более сложных случаях. Например: `m*.txt` - все файлы, начинающиеся на `m` и имеющие расширение `.txt`
* `cp -r dir1 dir2` - копирует содежимое `dir1` в `dir2`

`mv` - перемещение файлов. Можно перемещать за раз несколько файлов по аналогии с `cp`
* если в качестве параметров указать 2 имени файла, то первый будет переименован во второй

`rm` - удаление элементов
* `rm -r` - рекурентное удаление - удаляет директорий и все его содержимое, включая содержимое вложенных директорий

`cat` - выводит содежимое файла

`wc` - выводит кол-во строк, слов и символов

`sort` - сортирует в порядке возрастания.
* `cat lakes.txt | sort > lakes-sorted.txt` - возмет содежимое файла `lakes.txt`, отсортирует и сохранит результат в файл `lakes-sorted.txt`

`uniq` - удаляет дубликаты строк, идущие друг за другом. Чтобы удалить все дубликаты, вне зависимости от их положения в файле, его нужно сначала отсортировать.

`grep` - global regular expression print. Ищет строки, подходящие под паттерн. По-умолчанию чувствителен к регистру.
* `grep -i` - без учета регистра
* `grep -R` - рекурентный поиск в указанной директории. Выводит список файлов с найденными в них строками
* `grep -Rl` - тоже самое, но выводит только имена файлов

`sed` - stream editor. Берет `stdin` и изменяет его согласно указанному выржению. а затем выводит в `stdout`. Похож на 'найти и заменить'.
* `'s/snow/rain/'` - `s` => substitution, `rain` => исходная строка, `rain` - строка-замена. Таким образом смысл этого выражения заключается в `snow` на `rain`, но только первого экземпляра
* `'s/snow/rain/g'` - `g` => global. Таким образом будут заменены все `snow` на `rain`

`mkdir -p` - создает все промежуточные директории

`groups` - показывает, в какие группы входит пользователь

`tail` - показывает конец файла
* `tail -f` - показывает конец файла и следует за его ростом.

`diff` - просто отображает различия

`sdiff` - показывает 2 файла side-by-side с подсветкой различий

`vimdiff` - использует `vim` для сравнения

`alias` - создание псевдонимов
* `alias pw="pwd"` - создает псевдоним `pw` для комманды `pwd`
* `alias ll="ls -al"`

`export VARIABLE="VALUE"` - присваевает переменной окружения `VARIABLE` значение `VALUE`

`$VARIABLE` - обращение к переменной окружения
* `$USER` - переменная окружения, содержащая имя текущего пользователя
* `$HOME` - переменная окружения, содержащая путь до домашней директории текущего пользователя
* `PS1` - переменная окружения, содержащая строку приглашения коммандной строки
* `PATH` - переменная окружения, содержащая пути, разделенные двоеточием (:), к который осуществляется поиск исполняемых файлов

`env` - возвращает список экспортируемых переменных окружения с их значениями

`chmod` - смена прав доступа

`chgrp` - смена группы-владельца

`chown` - смена пользователя-владельца

`lsmod` - отображает, какие модули запущены

`getent group [groupname]` - позволяет узнать, какие пользователи входят в группу

`usermod` - изменение данных о пользователе
* `usermod -a -G <group> <user>` - добавляет пользователя в группу

`sudoedit` - позволяет безопасно редактировать файлы, доступные только для `root`'а

`du -sh /path/to/directory` - посмотреть, сколько занимает места директория

`df -h /path/to/mount/point` - посмотреть, сколько места есть на разделе

`sudo hdparm -I /dev/sda` - посмотреть информацию об HDD

`mount` - посмотреть список всех точек монтирования

`sudo mount -a` - примонтировать все, что описано в `/etc/fstab`

`sudo tune2fs -m 0 /mount/point/` - отключение резервирование места под `root`'а

stdin / stdout / stderror
===

`stdin` - standard input

`stdout` - standard output

`stderror` - standard error

`>` - перенаправление `stdout`. Например: `echo "Hello" > hello.txt` - результат выполнения комманды `echo` будет перенаправлен в файл `hello.txt`. Если указаный файл существует, то его содержимое будет перезаписано.

`>>` - перенаправление `stdout`, но при этом данные добавляются в коней файла

`<` - перенаправление `stdin` из правой части в левую. `cat < lakes.txt` - содержимое файла `lakes.txt` будет использовано как `stdin` комманды `cat`.

`|` - pipe, берет `stdout` комманды слева и перенаправляет его в `stdin` комманды справа.

Files and Folders
===

`~/.bash_profile` - файл, хранящий настройки окружения текущего пользователя

`/boot` - загрузчик

`/dev` - устройства

`/etc` - содержит системные конфигурационые файлы

`/home` - домашнии директории пользователей. Каждый пользователь имеет здесь свою домашнюю директорию с именем, совпадающим с именем пользователя. Например, у пользователя `john` домашняя папка будет `/home/john`. Также в домашних директориях пользователей могут размещаться конфигурационные файлы для конкретного пользователя.

`/lib` - системные библиотеки

`/lib64` - системные 64-битные библиотеки

`/media` - используется для монирования извлекаемых устройств, таких как USB

`/mnt` - используется для монирования внешних файловых системе

`/opt` - опциональные или сторонние приложения, которые не входят в состав ОС. Например, `google chrome` расположен в `/opt/google/chrome`

`/root` - домашняя директория пользователя `root`

`/sbin` - бинарники для системного администрирования

`/srv/www` - файлы веб-сервера

`/srv/ftp` - файлы ftp

`/tmp` - временная. Обычно очищается при загрузки ОС.

`/usr` - только для чтения. Для пользовательских программ и данных, доступных только для чтения

`/var` - переменные данные. Тут лежат логи в `/var/log`

Permissions
===

```bash
-rw-r--r--
0123456789
```
* 0 - тип элемента. `-` - обычный файл, `d` - директория, `l` - символическая ссылка
* 1, 4, 7 - признаки доступности на чтение (r)
* 2, 5, 8 - признаки доступности на запись (w)
* 3, 6, 9 - признаки доступности на исполнение (x)
* 1, 2, 3 - права для пользователя-владельца (u)
* 4, 5, 6 - права для группы-владельца (g)
* 7, 8, 9 - права для все остальных (o)

```bash
chmod u+r file
      g-w
      o=x
      a
```
`chmod u+x file` - добавляет пользователю-владельцу права на выполнение файла

`chmod ug+wx file` - добавляет пользователю и группе владельцев права на запись и испольнение файла

`chmod a=r file` - дает всем права только на чтение, все имеющиеся ранее права удаляются

```
read = 4, write = 2, exec = 1
read+write (rw) = 6
read+write+exec (rwx) = 7
```
```
-rwxr-xr-- = 754
-rw------- = 600
-rwx------ = 700
-rwxr-xr-x = 755
-rw-rw-r-- = 664
-rw-rw---- = 660
-rw-r--r-- = 644
```
```bash
chmod 744 file
```
Processes
===
`ps` - выводит список текущих процессов. Без параметров выводит только процессы текущего пользователя, запущенные из-под терминала
* `ps -e` - все процессы в системе

`top` или `htop` - выводят интеративный список процессов

`jobs` - выводит список всех фоновых процессов текущей сессии терминала (включая PID'ы)

`nohup <command> &` - запуск процесса, непривязанного к сессии

Переместить работающий процесс в фон
* Нажать `Ctrl + z`
* `bg`
* `jobs` - посмотреть номер `job`'а
* disown -h %<номер `job`'а>

Packages
===
`apt-cache search pattern` - ищет элементы, соответствующие паттерну

`apt-get install [-y] packages` - устанавливает пакеты. Опциональное `-y` - автоматическое да

`apt-get remove package` - удаление или деинсталяция пакета. Конфигурационные файлы сохраняются

`apt-get purge package` - удаление или деинсталяция пакета. Конфигурационные файлы удаляются

`apt-cache show package` - получение информации о пакете

`apt-get update` - получает новый список пакетов

`apt-get upgrade` - обновляет установленные пакеты

`dpkg -l` - список установленных пакетов

`dpkg -s /path/to/file` - отображает пакет, содержащий указанный файл

`dpkg -i package.deb` - установка пакета из deb-файла

`dpkg -L package` - отображает список все файлов, входящих в пакет

Linux as guest in Virtualbox
===
`build-essential linux-headers-virtual dkms` - для того, чтобы можно было поставить Virtualbox Guest Additions

Чтобы проверить, что Virtualbox Guest Additions установились корректно должны быть запущены следующие модули: `vboxsf` и `vboxguest`. Проверить это можно коммандой `lsmod | grep vbox`

`modinfo vboxguest | grep -iw version` - узнать текущую версию Virtualbox Guest Additions

Clean install
===
`nano zip unzip wget curl man-db acpid` - рекомендуемые пакеты для чистой установки
